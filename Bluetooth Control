#include <Servo.h>

#define MOTOR1_PIN 9
#define MOTOR2_PIN 10
char command;

Servo esc1, esc2;

void setup() {
    Serial.begin(9600);   // 기본 시리얼 모니터
    Serial1.begin(9600);  // 블루투스 모듈과 연결

    esc1.attach(MOTOR1_PIN);
    esc2.attach(MOTOR2_PIN);

    initializeESC();
}

void loop() {
    if (Serial1.available()) {
        command = Serial1.read();
        controlMotors(command);
    }
}

void initializeESC() {
    esc1.writeMicroseconds(1000);
    esc2.writeMicroseconds(1000);
    delay(3000);
}

void controlMotors(char cmd) {
    switch (cmd) {
        case 'F':
            esc1.writeMicroseconds(1600);
            esc2.writeMicroseconds(1600);
            break;
        case 'B':
            esc1.writeMicroseconds(1400);
            esc2.writeMicroseconds(1400);
            break;
        case 'S':
            esc1.writeMicroseconds(1000);
            esc2.writeMicroseconds(1000);
            break;
        default:
            break;
    }
}
